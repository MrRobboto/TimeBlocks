<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TimeBlocks</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        h1, h2, h3, h4, h5, h6 {
            margin: 0;
        }
    </style>
  </head>
  <body onload="focus()">
      <h1>TimeBlocks</h1>
      <p>20 Minute Focus Slots to Intermittently Push Full-Throttle and Mitigate <b>Distraction.</b></p>
      <br>
      <form id="form">
        <input id="input" type="text"/>
        <button type="button">START</button>
      </form>
      <br>
      <br>
      <h3>Current Block:</h3>
      <h1 id="block"></h1>
      <br>
      <br>
      <h6 style="font-size: 5rem;">Time Remaining:</h6>
      <h6 id="duration" style="font-size: 5rem;color:blue;"></h6>
      <br>
      <h3>Completed Blocks Since<b id="start-time"></b>:</h3>
      <p id="completed"></p>

      <script>
        var interval;
        var duration = 1200;
        var ele = document.getElementById('duration');
        var startTime = document.getElementById('start-time');
        var input = document.getElementById('input');
        var block = document.getElementById('block');      
        var blocks = document.getElementById('completed');
        function focus() {
            input.focus();
        }

        function start() {
          duration = 1200;
          ele.innerHTML = duration;
          startTime.innerHTML = new Date(Date.now());
          block.innerHTML = input.value;
          interval && clearInterval(interval);
          interval = setInterval(() => {
            duration--;
            ele.innerHTML = duration;
            if (duration === 0) {
                ele.innerHTML = 'BLOCK COMPLETED';
                blocks.innerHTML = blocks.innerHTML += input.value + '<br>';
                clearInterval(interval);
            }
          }, 1000);
        }
        document.getElementById('form').addEventListener("submit", function (event) {
            event.preventDefault();

            start();
        });
      </script>
  </body>
</html>